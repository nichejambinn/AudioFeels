<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>View Tracks</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
</head>
<body>
	<h1>View Tracks</h1>
	
	<form method="post" th:object="${trackForm}">
		<table class="table">
			<tr>
				<th>Album Art</th>
				<th>Track Name</th>
				<th>Artist</th>	
				<th>Album</th>
				<th>Mood</th>
				<th>Action</th>
			</tr>
			<tr th:each="track, itemStat : *{tracks}">
				<input type="hidden" th:field="*{tracks[__${itemStat.index}__].spotifyId}">
				<td><img th:src="${track.imgUrl}" style="height: 100px" /></td>
				<td th:text="${track.trackName}"></td>
				<td th:text="${track.artist}"></td>
				<td th:text="${track.album}"></td>
				<td>
					<select th:field="*{tracks[__${itemStat.index}__].label.id}">
						<option th:if="${track.label == null}" th:value="NONE" th:selected="${track.label == null}">Select a mood</option>
						<option th:if="${track.label == null}" th:value="NONE">-------------------------</option>
						<option th:each="label : ${labels}" 
								th:value="${label.id}" th:text="${label.mood}"
								th:selected="${track.label == label}">
						</option>
					</select>
				</td>
				<td>
					<button type="submit" th:formaction="@{/saveTrackLabel/{id}(id=${track.spotifyId})}">SAVE</button>
					<button type="submit" th:formaction="@{/deleteTrack/{id}(id=${track.spotifyId})}">DELETE</button>
				</td>
			</tr>
			<tr>
				<td><a>ADD SONG</a></td>
			</tr>
		</table>
	</form>
	
	<a th:href="@{/}">HOME</a>
</body>
</html>